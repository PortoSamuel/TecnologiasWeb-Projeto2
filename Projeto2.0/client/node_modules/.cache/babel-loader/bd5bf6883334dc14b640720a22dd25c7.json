{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Samuel Porto\\\\Desktop\\\\Semestres\\\\4\\xB0 Semestre\\\\TechWeb\\\\Parte2\\\\Projeto2.0\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Samuel Porto\\\\Desktop\\\\Semestres\\\\4\\xB0 Semestre\\\\TechWeb\\\\Parte2\\\\Projeto2.0\\\\client\\\\src\\\\components\\\\FirstPage.js\";\nimport React, { Component, useState } from 'react';\nimport './styles.css';\n\nvar SpotifyWebApi = require('spotify-web-api-node');\n\nfunction getHashParams() {\n  var hashParams = {};\n  var e,\n      r = /([^&;=]+)=?([^&;]*)/g,\n      q = window.location.hash.substring(1);\n\n  while (e = r.exec(q)) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n  }\n\n  return hashParams;\n}\n\nconst params = getHashParams();\nconst access_token = params.access_token;\nconst client_id = params.client_id;\nconst client_secret = params.client_secret;\nvar spotifyApi = new SpotifyWebApi({\n  clientId: client_id,\n  clientSecret: client_secret,\n  redirectUri: 'http://www.example.com/callback'\n}); // const savedTracks = getSavedTracks();\n\nconst FirstPage = () => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        userImage = _useState2[0],\n        setuserImage = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        userName = _useState4[0],\n        setuserName = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        userMusics = _useState6[0],\n        setuserMusics = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        page = _useState8[0],\n        setPage = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        totalPages = _useState10[0],\n        setTotalPages = _useState10[1];\n\n  spotifyApi.setAccessToken(access_token);\n\n  async function getMe() {\n    await spotifyApi.getMe().then(function (data) {\n      // console.log('Some information about the authenticated user', data.body);\n      setuserImage(data.body.images[0].url);\n      setuserName(data.body.display_name);\n    }, function (err) {\n      console.log('Erro getMe!', err);\n    });\n  }\n\n  ;\n\n  async function getSavedTracks(pageNumber) {\n    await spotifyApi.getMySavedTracks({\n      limit: 10,\n      offset: pageNumber\n    }).then(function (data) {\n      console.log('Done!');\n      console.log(data);\n      setTotalPages(data.body.total);\n      setuserMusics(data.body.items);\n    }, function (err) {\n      console.log('Something went wrong!', err);\n    });\n  }\n\n  function nextPage() {\n    if (page === totalPages) return;\n    const pageNumber = page + 20;\n    console.log(page);\n    getSavedTracks(pageNumber);\n  }\n\n  function previousPage() {\n    if (page === 0) return;\n    const pageNumber = page - 20;\n    console.log(page);\n    getSavedTracks(pageNumber);\n  }\n\n  async function removeTrack(music_id) {\n    await spotifyApi.removeFromMySavedTracks([music_id]).then(function (data) {\n      console.log('Removed!');\n    }, function (err) {\n      console.log('Something went wrong!', err);\n    }); // console.log(music_id)\n  }\n\n  ;\n  getMe();\n  getSavedTracks();\n  return React.createElement(\"div\", {\n    className: \"FirstPage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: userImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Bem vindo \", userName, \"!\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Suas m\\xFAsicas salvas:\"), React.createElement(\"div\", {\n    className: \"music-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, Object.entries(userMusics).map(([k, v]) => React.createElement(\"article\", {\n    key: v.track.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: v.track.album.images[1].url,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  })), React.createElement(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, v.track.name))))), React.createElement(\"div\", {\n    className: \"actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    disabled: page === 0,\n    onClick: previousPage(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Anterior\"), React.createElement(\"button\", {\n    disabled: page === totalPages,\n    onClick: nextPage(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Pr\\xF3ximo\")));\n};\n\nexport default FirstPage;","map":{"version":3,"sources":["C:/Users/Samuel Porto/Desktop/Semestres/4° Semestre/TechWeb/Parte2/Projeto2.0/client/src/components/FirstPage.js"],"names":["React","Component","useState","SpotifyWebApi","require","getHashParams","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","params","access_token","client_id","client_secret","spotifyApi","clientId","clientSecret","redirectUri","FirstPage","userImage","setuserImage","userName","setuserName","userMusics","setuserMusics","page","setPage","totalPages","setTotalPages","setAccessToken","getMe","then","data","body","images","url","display_name","err","console","log","getSavedTracks","pageNumber","getMySavedTracks","limit","offset","total","items","nextPage","previousPage","removeTrack","music_id","removeFromMySavedTracks","Object","entries","map","k","v","track","id","album","name"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\r\n\r\nimport './styles.css';\r\n\r\nvar SpotifyWebApi = require('spotify-web-api-node');\r\n\r\nfunction getHashParams() {\r\n    var hashParams = {};\r\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\r\n        q = window.location.hash.substring(1);\r\n    while (e = r.exec(q)) {\r\n        hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    }\r\n    return hashParams;\r\n}\r\n\r\nconst params = getHashParams();\r\n\r\nconst access_token = params.access_token;\r\nconst client_id = params.client_id;\r\nconst client_secret = params.client_secret;\r\n\r\nvar spotifyApi = new SpotifyWebApi({\r\n    clientId: client_id,\r\n    clientSecret: client_secret,\r\n    redirectUri: 'http://www.example.com/callback'\r\n});\r\n\r\n\r\n\r\n\r\n// const savedTracks = getSavedTracks();\r\n\r\nconst FirstPage = () => {\r\n    const [userImage, setuserImage] = useState('');\r\n    const [userName, setuserName] = useState('');\r\n    const [userMusics, setuserMusics] = useState('');\r\n    const [page, setPage] = useState('');\r\n    const [totalPages, setTotalPages] = useState('');\r\n\r\n    spotifyApi.setAccessToken(access_token);\r\n\r\n    async function getMe() {\r\n       await spotifyApi.getMe()\r\n            .then(function (data) {\r\n                // console.log('Some information about the authenticated user', data.body);\r\n                setuserImage(data.body.images[0].url);\r\n                setuserName(data.body.display_name);\r\n            }, function (err) {\r\n                console.log('Erro getMe!', err);\r\n            });\r\n    };\r\n\r\n    async function getSavedTracks(pageNumber) {\r\n        await spotifyApi.getMySavedTracks({\r\n            limit: 10,\r\n            offset: pageNumber\r\n        })\r\n            .then(function (data) {\r\n                console.log('Done!');\r\n                console.log(data);\r\n                setTotalPages(data.body.total);\r\n                setuserMusics(data.body.items);\r\n            }, function (err) {\r\n                console.log('Something went wrong!', err);\r\n            });\r\n    }\r\n\r\n    function nextPage() {\r\n\r\n        if (page === totalPages) return;\r\n\r\n        const pageNumber = page + 20;\r\n\r\n        console.log(page);\r\n\r\n        getSavedTracks(pageNumber);\r\n\r\n    }\r\n\r\n    function previousPage() {\r\n        if (page === 0) return;\r\n\r\n        const pageNumber = page - 20;\r\n\r\n        console.log(page);\r\n\r\n        getSavedTracks(pageNumber);\r\n    }\r\n\r\n    async function removeTrack(music_id) {\r\n       await spotifyApi.removeFromMySavedTracks([music_id])\r\n            .then(function (data) {\r\n                console.log('Removed!');\r\n            }, function (err) {\r\n                console.log('Something went wrong!', err);\r\n            });\r\n\r\n        // console.log(music_id)\r\n    };\r\n\r\ngetMe();\r\ngetSavedTracks();\r\n\r\nreturn (\r\n    <div className=\"FirstPage\">\r\n        <img src={userImage} ></img>\r\n        <p>Bem vindo {userName}!</p>\r\n        <p></p>\r\n        <p>Suas músicas salvas:</p>\r\n\r\n        <div className='music-list'>\r\n\r\n            {Object.entries(userMusics).map(([k, v]) => (\r\n\r\n                <article key={v.track.id}>\r\n                    <p>\r\n                        <img src={v.track.album.images[1].url} ></img>\r\n                        {/* <button onClick={removeTrack(v.track.id)}>Remover Música</button> */}\r\n                    </p>\r\n                    <a><strong>{v.track.name}</strong></a>\r\n                </article>\r\n\r\n            ))}\r\n\r\n        </div>\r\n\r\n        <div className='actions'>\r\n                <button  disabled={page === 0} onClick={previousPage()}>Anterior</button>\r\n                <button  disabled={page === totalPages}  onClick={nextPage()}>Próximo</button>\r\n        </div>\r\n\r\n    </div>\r\n);\r\n};\r\n\r\nexport default FirstPage;"]},"metadata":{},"sourceType":"module"}